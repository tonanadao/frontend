{"ast":null,"code":"/* eslint-disable no-continue */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-prototype-builtins */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar errorClasses = {};\nvar deserializers = {};\nexport var addCustomErrorDeserializer = function (name, deserializer) {\n  deserializers[name] = deserializer;\n};\nexport var createCustomErrorClass = function (name) {\n  var CustomErrorClass = /** @class */function (_super) {\n    __extends(CustomErrorClass, _super);\n    function CustomErrorClass(message, fields, options) {\n      var _this =\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      _super.call(this, message || name, options) || this;\n      // Set the prototype explicitly. See https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work\n      Object.setPrototypeOf(_this, CustomErrorClass.prototype);\n      _this.name = name;\n      if (fields) {\n        for (var k in fields) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          _this[k] = fields[k];\n        }\n      }\n      if (options && isObject(options) && \"cause\" in options && !(\"cause\" in _this)) {\n        // .cause was specified but the superconstructor\n        // did not create an instance property.\n        var cause = options.cause;\n        _this.cause = cause;\n        if (\"stack\" in cause) {\n          _this.stack = _this.stack + \"\\nCAUSE: \" + cause.stack;\n        }\n      }\n      return _this;\n    }\n    return CustomErrorClass;\n  }(Error);\n  errorClasses[name] = CustomErrorClass;\n  return CustomErrorClass;\n};\nfunction isObject(value) {\n  return typeof value === \"object\";\n}\n// inspired from https://github.com/programble/errio/blob/master/index.js\nexport var deserializeError = function (object) {\n  if (object && typeof object === \"object\") {\n    try {\n      if (typeof object.message === \"string\") {\n        var msg = JSON.parse(object.message);\n        if (msg.message && msg.name) {\n          object = msg;\n        }\n      }\n    } catch (e) {\n      // nothing\n    }\n    var error = void 0;\n    if (typeof object.name === \"string\") {\n      var name_1 = object.name;\n      var des = deserializers[name_1];\n      if (des) {\n        error = des(object);\n      } else {\n        var constructor = name_1 === \"Error\" ? Error : errorClasses[name_1];\n        if (!constructor) {\n          console.warn(\"deserializing an unknown class '\" + name_1 + \"'\");\n          constructor = createCustomErrorClass(name_1);\n        }\n        error = Object.create(constructor.prototype);\n        try {\n          for (var prop in object) {\n            if (object.hasOwnProperty(prop)) {\n              error[prop] = object[prop];\n            }\n          }\n        } catch (e) {\n          // sometimes setting a property can fail (e.g. .name)\n        }\n      }\n    } else {\n      if (typeof object.message === \"string\") {\n        error = new Error(object.message);\n      }\n    }\n    if (error && !error.stack && Error.captureStackTrace) {\n      Error.captureStackTrace(error, deserializeError);\n    }\n    return error;\n  }\n  return new Error(String(object));\n};\n// inspired from https://github.com/sindresorhus/serialize-error/blob/master/index.js\nexport var serializeError = function (value) {\n  if (!value) return value;\n  if (typeof value === \"object\") {\n    return destroyCircular(value, []);\n  }\n  if (typeof value === \"function\") {\n    return \"[Function: \".concat(value.name || \"anonymous\", \"]\");\n  }\n  return value;\n};\n// https://www.npmjs.com/package/destroy-circular\nfunction destroyCircular(from, seen) {\n  var e_1, _a;\n  var to = {};\n  seen.push(from);\n  try {\n    for (var _b = __values(Object.keys(from)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var value = from[key];\n      if (typeof value === \"function\") {\n        continue;\n      }\n      if (!value || typeof value !== \"object\") {\n        to[key] = value;\n        continue;\n      }\n      if (seen.indexOf(from[key]) === -1) {\n        to[key] = destroyCircular(from[key], seen.slice(0));\n        continue;\n      }\n      to[key] = \"[Circular]\";\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  if (typeof from.name === \"string\") {\n    to.name = from.name;\n  }\n  if (typeof from.message === \"string\") {\n    to.message = from.message;\n  }\n  if (typeof from.stack === \"string\") {\n    to.stack = from.stack;\n  }\n  return to;\n}","map":{"version":3,"sources":["../src/helpers.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/* eslint-disable no-continue */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-prototype-builtins */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar errorClasses = {};\nvar deserializers = {};\nexport var addCustomErrorDeserializer = function (name, deserializer) {\n    deserializers[name] = deserializer;\n};\nexport var createCustomErrorClass = function (name) {\n    var CustomErrorClass = /** @class */ (function (_super) {\n        __extends(CustomErrorClass, _super);\n        function CustomErrorClass(message, fields, options) {\n            var _this = \n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            _super.call(this, message || name, options) || this;\n            // Set the prototype explicitly. See https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work\n            Object.setPrototypeOf(_this, CustomErrorClass.prototype);\n            _this.name = name;\n            if (fields) {\n                for (var k in fields) {\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-ignore\n                    _this[k] = fields[k];\n                }\n            }\n            if (options &&\n                isObject(options) &&\n                \"cause\" in options &&\n                !(\"cause\" in _this)) {\n                // .cause was specified but the superconstructor\n                // did not create an instance property.\n                var cause = options.cause;\n                _this.cause = cause;\n                if (\"stack\" in cause) {\n                    _this.stack = _this.stack + \"\\nCAUSE: \" + cause.stack;\n                }\n            }\n            return _this;\n        }\n        return CustomErrorClass;\n    }(Error));\n    errorClasses[name] = CustomErrorClass;\n    return CustomErrorClass;\n};\nfunction isObject(value) {\n    return typeof value === \"object\";\n}\n// inspired from https://github.com/programble/errio/blob/master/index.js\nexport var deserializeError = function (object) {\n    if (object && typeof object === \"object\") {\n        try {\n            if (typeof object.message === \"string\") {\n                var msg = JSON.parse(object.message);\n                if (msg.message && msg.name) {\n                    object = msg;\n                }\n            }\n        }\n        catch (e) {\n            // nothing\n        }\n        var error = void 0;\n        if (typeof object.name === \"string\") {\n            var name_1 = object.name;\n            var des = deserializers[name_1];\n            if (des) {\n                error = des(object);\n            }\n            else {\n                var constructor = name_1 === \"Error\" ? Error : errorClasses[name_1];\n                if (!constructor) {\n                    console.warn(\"deserializing an unknown class '\" + name_1 + \"'\");\n                    constructor = createCustomErrorClass(name_1);\n                }\n                error = Object.create(constructor.prototype);\n                try {\n                    for (var prop in object) {\n                        if (object.hasOwnProperty(prop)) {\n                            error[prop] = object[prop];\n                        }\n                    }\n                }\n                catch (e) {\n                    // sometimes setting a property can fail (e.g. .name)\n                }\n            }\n        }\n        else {\n            if (typeof object.message === \"string\") {\n                error = new Error(object.message);\n            }\n        }\n        if (error && !error.stack && Error.captureStackTrace) {\n            Error.captureStackTrace(error, deserializeError);\n        }\n        return error;\n    }\n    return new Error(String(object));\n};\n// inspired from https://github.com/sindresorhus/serialize-error/blob/master/index.js\nexport var serializeError = function (value) {\n    if (!value)\n        return value;\n    if (typeof value === \"object\") {\n        return destroyCircular(value, []);\n    }\n    if (typeof value === \"function\") {\n        return \"[Function: \".concat(value.name || \"anonymous\", \"]\");\n    }\n    return value;\n};\n// https://www.npmjs.com/package/destroy-circular\nfunction destroyCircular(from, seen) {\n    var e_1, _a;\n    var to = {};\n    seen.push(from);\n    try {\n        for (var _b = __values(Object.keys(from)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var key = _c.value;\n            var value = from[key];\n            if (typeof value === \"function\") {\n                continue;\n            }\n            if (!value || typeof value !== \"object\") {\n                to[key] = value;\n                continue;\n            }\n            if (seen.indexOf(from[key]) === -1) {\n                to[key] = destroyCircular(from[key], seen.slice(0));\n                continue;\n            }\n            to[key] = \"[Circular]\";\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    if (typeof from.name === \"string\") {\n        to.name = from.name;\n    }\n    if (typeof from.message === \"string\") {\n        to.message = from.message;\n    }\n    if (typeof from.stack === \"string\") {\n        to.stack = from.stack;\n    }\n    return to;\n}\n//# sourceMappingURL=helpers.js.map"]},"metadata":{},"sourceType":"module"}